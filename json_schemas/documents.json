{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "documents",
    "description": "Details on document attachments.\n \nFor example a Market Reform Contract.\n\n---\n\nLDM Ref: Document",
    "$comment": "Details on document attachments. For example a Market Reform Contract.\n\nThis collection is accessible by brokers and underwriters.",
    "properties": {
        "_id": {
            "type": "string",
            "description": "A system-generated unique identifier for a Document, with a format and structure defined by the technology used. As a technical attribute, it has no business meaning.\n\n---\n\nLDM Ref: Document.Document ID",
            "examples": [
                "0f8fad5b-d9cb-469f-a165-70867728950e"
            ],
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "user": {
            "type": "string",
            "description": "The ID of the user that uploaded the document.\n\n---\n\nLDM Ref: Document.User ID",
            "examples": [
                "0f8fad5b-d9cb-469f-a165-70867728950e"
            ],
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "broker_team": {
            "type": "object",
            "properties": {
                "_xid": {
                    "type": "string",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ],
                    "maxLength": 36,
                    "minLength": 36,
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
                },
                "name": {
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "required": [
                "_xid",
                "name"
            ]
        },
        "name": {
            "type": "string",
            "description": "The file name of the document including the extension.\n\n---\n\nLDM Ref: Document.Document File Name",
            "examples": [
                "ABC Corp Intl Casualty.docx"
            ]
        },
        "description": {
            "type": "string",
            "description": "A description of the document and its contents.\n\n---\n\nLDM Ref: Document.Document Description",
            "examples": [
                "Indemnity for the Insured in respect of their legal liabilities arising out of or connected with the business all as more fully described and specified in the Underlying Policy"
            ]
        },
        "_metadata": {
            "type": "object",
            "properties": {
                "creation_date": {
                    "type": "string",
                    "description": "The date at which the entity was created.",
                    "examples": [
                        "ISODate(\"2021-10-11T11:50:00Z\")"
                    ],
                    "format": "date"
                },
                "creation_channel": {
                    "type": "string",
                    "description": "Channel used to make the entity, e.g. OutSystems.",
                    "examples": [
                        "OutSystems"
                    ]
                },
                "creation_user": {
                    "type": "string",
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
                    "minLength": 36,
                    "maxLength": 36,
                    "description": "_id of the user creating the entity.",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ]
                },
                "modified_date": {
                    "type": "string",
                    "description": "The date at which the change was made.",
                    "examples": [
                        "ISODate(\"2021-12-11T11:50:00Z\")"
                    ],
                    "format": "date"
                },
                "modified_channel": {
                    "type": "string",
                    "description": "Channel used to make the change, e.g. OutSystems.",
                    "examples": [
                        "OutSystems"
                    ]
                },
                "modified_user": {
                    "type": "string",
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
                    "minLength": 36,
                    "maxLength": 36,
                    "description": "_id of the user making the change.",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ]
                }
            },
            "additionalProperties": false,
            "required": [
                "creation_date",
                "creation_channel",
                "creation_user",
                "modified_date",
                "modified_channel",
                "modified_user"
            ]
        },
        "major_version": {
            "type": "integer",
            "description": "Integer part of the version number.\n\n---\n\nLDM Ref: Document.Document Version Number"
        },
        "minor_version": {
            "type": "integer",
            "description": "The decimal part of the version number\n\n---\n\nLDM Ref: Document.Document Version Number"
        },
        "additional_version": {
            "type": "string",
            "description": "String to append to the version number for any additional identification\n\n---\n\nLDM Ref: Document.Document Version Number"
        },
        "size": {
            "type": "integer",
            "description": "The size of the document in bytes.\n\n---\n\nLDM Ref: Document.Document File Size In Bytes"
        },
        "type": {
            "type": "string",
            "description": "**Reference Data**\n\nThe type that describes the document class.\n \nFor example Source MRC, Digitised MRC, Non-digitised MRC, Supporting document.\n\n\nDocumentType in Reference Data\n\n---\n\nLDM Ref: Document.Document Type Code",
            "enum": [
                "advice_premium",
                "bordereau_premium_and_loss",
                "calculation_adjustment_premium",
                "calculation_reinstatement",
                "correspondence_client",
                "document",
                "document_certificate",
                "document_file_note",
                "document_market_presentation",
                "document_placing_endorsement",
                "document_placing_slip",
                "document_placing_slip_expiring",
                "document_renewal_information",
                "form_declaration",
                "form_statutory_declaration",
                "large_loss_report",
                "placing",
                "questionnaire",
                "report",
                "report_loss_history",
                "report_survey",
                "schedule_values",
                "table_of_limits",
                "underwriter_terms_sheet",
                "wording",
                "wording_addenda",
                "wording_agreed"
            ],
            "examples": [
                "ABC Corp Intl Casualty.docx"
            ]
        },
        "uri": {
            "type": "string",
            "description": "The UID of the document that links back to the physical location of the file.\n\n---\n\nLDM Ref: Document.Document UID",
            "pattern": "^$|^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "status": {
            "type": "string",
            "description": "**Reference Data**\n\nThe code that represents the document status.\n  \nFor example Draft, Active, Archived, Deleted.\n\nDocumentStatus in Reference Data\n\n---\n\nLDM Ref: Document.Document Status Code",
            "enum": [
                "active",
                "archived",
                "deleted",
                "draft"
            ],
            "examples": [
                "ABC Corp Intl Casualty.docx"
            ]
        },
        "context": {
            "type": "object",
            "description": "Context of the message it can be PLACEMENT / PROGRAMME/CONTRACT /SECTION that the document is associated with.\n\n",
            "properties": {
                "_xid": {
                    "type": "string",
                    "description": "It can be -\n- The ID of the placement that the message is associated with.\n- The ID of the contract that the message is associated with.\n\n---\n\nLDM Ref: Collaboration \\ Message \\ Contract ID or Placement ID",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ],
                    "maxLength": 36,
                    "minLength": 36,
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
                },
                "type": {
                    "type": "string",
                    "description": "Identifies where within the hierarchical structure of a Placement this Document is held\n\n**Reference Data**\n\nContextType in Reference Data",
                    "enum": [
                        "contract",
                        "endorsement_contract",
                        "endorsement_section",
                        "placement",
                        "programme",
                        "quote_negotiation",
                        "section",
                        "subpanel"
                    ]
                }
            },
            "additionalProperties": false,
            "required": [
                "_xid",
                "type"
            ]
        },
        "key": {
            "type": "string",
            "description": "Key used for grouping documents. \n\nAs a documents can have multiple versions, with each instance containing a unique _id, Documents can be grouped by this field and ordered accordingly. ",
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "class_type": {
            "type": "string",
            "description": "**Reference Data**\n\nThe code that represents the document class type.\n\nDocumentClassType in Reference Data\n\n---\n\nLDM Ref: Document Class Type Code\n",
            "enum": [
                "digitised_mrc",
                "non_digitised_mrc",
                "non_digitised_supporting_document",
                "source_mrc"
            ]
        },
        "access": {
            "type": "array",
            "description": "In the case of a document, array of team Ids that have access to the report (both broker and UW).\n\nJira Ticket: https://pplnextgen.atlassian.net/browse/PNG-24261\n",
            "additionalItems": false,
            "items": {
                "type": "string",
                "examples": [
                    "0f8fad5b-d9cb-469f-a165-70867728950e"
                ],
                "maxLength": 36,
                "minLength": 36,
                "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
            },
            "uniqueItems": true
        },
        "based_on": {
            "type": "integer",
            "description": "Integer part of the version number\n\nLDM 1.18\n\npart of document version number\n\n---\n\nWhen submission pack is sent with a document to a UW, a copy is made of the original document, this field stores the major version of the original document.\n \n\n"
        },
        "based_xid": {
            "type": "string",
            "description": "When submission pack is sent with a document to a UW, a copy is made of the original document, this field stores the _id of the original document.\n ",
            "examples": [
                "0f8fad5b-d9cb-469f-a165-70867728950e"
            ],
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "is_shared": {
            "type": "boolean",
            "description": "When submission pack is sent with a document to a UW, a copy is made of the original document.\n\nThis field stores if this has been sent to a UW or not.\n"
        },
        "version": {
            "type": "string",
            "description": "Representation of the major and minor versions."
        },
        "placement": {
            "type": "string",
            "description": "Reference to the Placement that holds the Document.",
            "examples": [
                "0f8fad5b-d9cb-469f-a165-70867728950e"
            ],
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        }
    },
    "additionalProperties": false,
    "required": [
        "_id",
        "user",
        "broker_team",
        "name",
        "description",
        "_metadata",
        "major_version",
        "minor_version",
        "size",
        "type",
        "uri",
        "status",
        "context",
        "key",
        "class_type",
        "access",
        "is_shared",
        "placement"
    ]
}
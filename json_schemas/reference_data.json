{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "reference_data",
    "description": "Collection holding individual reference data items, grouped into codesets by codeset_id. \n\nMaps to all entities in the LDM under the reference_data space. Definitions and sources of reference data found on [Confluence](https://pplnextgen.atlassian.net/wiki/spaces/PNG/pages/193331201/Reference+Data+-+Codelists+WIP).",
    "$comment": "The reference_data collection makes full use of the document model. The base fields are designed in this PDM, allowing the developer to make extensions to the schema as necessary.\n\nThe additional fields property is set to true to allow the developer the flexibility of storing further information, for example sub-categories, without the need for exhaustive model designs.\n\nFor example, given a simple reference data type, the resulting document may take a form similar to the following:\n\n```json\n{\n   “type”: “agency_type”,\n   “code”: “lloyds”,\n   “name”: “Lloyd’s”,\n   \"description\": \"field description\",\n   \"active\": true\n}\n```\n\nwhereas a more complex type, may take the following structure:\n```json\n{\n   “type”: “limit_deductible_type”,\n   “subtype”: “deductible”,\n   “code”: “excess”,\n   “name”: “Excess”,\n   \"description\": \"field description\",\n   \"active\": true\n}\n```\n\nThe document model allows for this flexibility as each document (database record) can take a different form. Should you wish to return reference data that is applicable to a subtype or where a subtype does not exist, you can use the $or operator the achieve this.\n\n```json\n[\n   { $match: { \n      type: “participation_status” \n   } },\n   { $match: { \n      $or: [ \n         { subtype: “endorsement” }, \n         { subtype: { $exists: false } } \n      ] \n   } }\n]\n```\n",
    "properties": {
        "_id": {
            "type": "string",
            "description": "A system-generated unique identifier for a reference data attribute, with a format and structure defined by the technology used. As a technical attribute, it has no business meaning.",
            "examples": [
                "0f8fad5b-d9cb-469f-a165-70867728950e"
            ],
            "maxLength": 36,
            "minLength": 36,
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$"
        },
        "type": {
            "type": "string",
            "description": "The type of reference data represented by the document. For example, subjectivity status, party role, or submission pack type. This field represents all the grey entities in the Reference Data diagram.\n\n--- \n\nLDM Ref: Reference Data Diagram",
            "examples": [
                "ParticipationStatus"
            ]
        },
        "description": {
            "type": "string",
            "description": "A description of the reference data type. This field represents the Description field specific to each grey entity present in the Reference Data diagram.\n\n---\n\nLDM Ref: Reference Data Grey Entities Description field",
            "examples": [
                "Cancelled and Replaced"
            ]
        },
        "code": {
            "type": "string",
            "description": "The code represents the reference data item. Used for referring to this particular reference data entry. This field represents the Code field specific to each grey entity present in the Reference Data diagram.\n\n--- \n\nLDM Ref: Reference Data Grey Entities Code field",
            "examples": [
                "cancel_replace"
            ]
        },
        "value": {
            "type": "string",
            "description": "The value that is displayed in the UI. \n\n---\n",
            "examples": [
                "Cancel & Replace"
            ]
        },
        "active": {
            "type": "boolean",
            "description": "Indicates that the reference value is in use when True. This field represents the Active Indicator field specific to each grey entity present in the Reference Data diagram.\n\n---\n\nLDM Ref: Reference Data Grey Entities Active Indicator field",
            "examples": [
                "true"
            ]
        },
        "identifier_code": {
            "type": "string",
            "description": "The code that represents a logical grouping of reference data entries. \n\nThis field represents the Identifier Code field specific to each grey entity present in the Reference Data diagram.\n \nFor example 'B' for broker users and 'U' for underwriter users.\n\n--- \n\nLDM Ref: Reference Data Grey Entities Identifier Type Code field",
            "examples": [
                "correction"
            ]
        },
        "parent_code": {
            "type": "string",
            "description": "Used for hierarchical mapping of reference data entries. For example, Line of Business is a child of Class of Business.\n\n---"
        },
        "_metadata": {
            "type": "object",
            "properties": {
                "creation_date": {
                    "type": "string",
                    "description": "The date at which the entity was created.",
                    "examples": [
                        "ISODate(\"2021-10-11T11:50:00Z\")"
                    ],
                    "format": "date"
                },
                "creation_channel": {
                    "type": "string",
                    "description": "Channel used to make the entity, e.g. OutSystems.",
                    "examples": [
                        "OutSystems"
                    ]
                },
                "creation_user": {
                    "type": "string",
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
                    "minLength": 36,
                    "maxLength": 36,
                    "description": "_id of the user creating the entity.",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ]
                },
                "modified_date": {
                    "type": "string",
                    "description": "The date at which the change was made.",
                    "examples": [
                        "ISODate(\"2021-12-11T11:50:00Z\")"
                    ],
                    "format": "date"
                },
                "modified_channel": {
                    "type": "string",
                    "description": "Channel used to make the change, e.g. OutSystems.",
                    "examples": [
                        "OutSystems"
                    ]
                },
                "modified_user": {
                    "type": "string",
                    "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
                    "minLength": 36,
                    "maxLength": 36,
                    "description": "_id of the user making the change.",
                    "examples": [
                        "0f8fad5b-d9cb-469f-a165-70867728950e"
                    ]
                }
            },
            "additionalProperties": false,
            "required": [
                "creation_date",
                "creation_channel",
                "creation_user",
                "modified_date",
                "modified_channel",
                "modified_user"
            ]
        },
        "source": {
            "type": "object",
            "description": "Subdocument containing metadata relating to the original author/provider of the reference data item.",
            "properties": {
                "provider": {
                    "type": "string",
                    "description": "The name of the source for the reference data value. In most cases this would be the same for all entries for a code list; however there could be exceptions for individual values.\n\n---\n\nLDM Ref: Not modelled in LDM.",
                    "examples": [
                        "ACORD"
                    ]
                },
                "codeset_id": {
                    "type": "string",
                    "description": "The unique ID of the code list from the source.\n\n---\n\nLDM Ref: Not modelled in LDM.",
                    "examples": [
                        "B06"
                    ]
                },
                "code_id": {
                    "type": "string",
                    "description": "The unique ID of the reference data value in the source code list.\n\n---\n\nLDM Ref: Not modelled in LDM.",
                    "examples": [
                        "701"
                    ]
                },
                "version": {
                    "type": "string",
                    "description": "The version of the reference data value in the source code list.\n\n---\n\nLDM Ref: Not modelled in LDM.",
                    "examples": [
                        "20200728"
                    ]
                },
                "version_date": {
                    "type": "string",
                    "description": "The date the version of the reference data value was created/modified in the source code list.\n\n---\n\nLDM Ref: Not modelled in LDM.",
                    "examples": [
                        "ISODate(\"2020-07-28\")"
                    ],
                    "format": "date"
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": true,
    "required": [
        "_id",
        "type",
        "code"
    ]
}